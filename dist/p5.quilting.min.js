/*! For license information please see p5.quilting.min.js.LICENSE.txt */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.Quilting=n():t.Quilting=n()}(window,(()=>(()=>{var t={317:function(t,n){var e,i;void 0===(i="function"==typeof(e=function(t){function n(t,n,e){this.obj=t,this.left=null,this.right=null,this.parent=e,this.dimension=n}function e(t){this.content=[],this.scoreFunction=t}e.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var n=this.content.length,e=0;e<n;e++)if(this.content[e]==t){var i=this.content.pop();return void(e!=n-1&&(this.content[e]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.bubbleUp(e):this.sinkDown(e)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(t){for(var n=this.content[t];t>0;){var e=Math.floor((t+1)/2)-1,i=this.content[e];if(!(this.scoreFunction(n)<this.scoreFunction(i)))break;this.content[e]=n,this.content[t]=i,t=e}},sinkDown:function(t){for(var n=this.content.length,e=this.content[t],i=this.scoreFunction(e);;){var s=2*(t+1),r=s-1,l=null;if(r<n){var o=this.content[r],h=this.scoreFunction(o);h<i&&(l=r)}if(s<n){var a=this.content[s];this.scoreFunction(a)<(null==l?i:h)&&(l=s)}if(null==l)break;this.content[t]=this.content[l],this.content[l]=e,t=l}}},t.kdTree=function(t,i,s){var r=this;Array.isArray(t)?this.root=function t(e,i,r){var l,o,h=i%s.length;return 0===e.length?null:1===e.length?new n(e[0],h,r):(e.sort((function(t,n){return t[s[h]]-n[s[h]]})),(o=new n(e[l=Math.floor(e.length/2)],h,r)).left=t(e.slice(0,l),i+1,o),o.right=t(e.slice(l+1),i+1,o),o)}(t,0,null):function(t){r.root=t,function t(n){n.left&&(n.left.parent=n,t(n.left)),n.right&&(n.right.parent=n,t(n.right))}(r.root)}(t),this.toJSON=function(t){t||(t=this.root);var e=new n(t.obj,t.dimension,null);return t.left&&(e.left=r.toJSON(t.left)),t.right&&(e.right=r.toJSON(t.right)),e},this.insert=function(t){var e,i,r=function n(e,i){if(null===e)return i;var r=s[e.dimension];return t[r]<e.obj[r]?n(e.left,e):n(e.right,e)}(this.root,null);null!==r?(e=new n(t,(r.dimension+1)%s.length,r),i=s[r.dimension],t[i]<r.obj[i]?r.left=e:r.right=e):this.root=new n(t,0,null)},this.remove=function(t){var n;null!==(n=function n(e){if(null===e)return null;if(e.obj===t)return e;var i=s[e.dimension];return t[i]<e.obj[i]?n(e.left):n(e.right)}(r.root))&&function t(n){function e(t,n){var i,r,l,o,h;return null===t?null:(i=s[n],t.dimension===n?null!==t.left?e(t.left,n):t:(r=t.obj[i],l=e(t.left,n),o=e(t.right,n),h=t,null!==l&&l.obj[i]<r&&(h=l),null!==o&&o.obj[i]<h.obj[i]&&(h=o),h))}var i,l,o;if(null===n.left&&null===n.right)return null===n.parent?void(r.root=null):(o=s[n.parent.dimension],void(n.obj[o]<n.parent.obj[o]?n.parent.left=null:n.parent.right=null));null!==n.right?(l=(i=e(n.right,n.dimension)).obj,t(i),n.obj=l):(l=(i=e(n.left,n.dimension)).obj,t(i),n.right=n.left,n.left=null,n.obj=l)}(n)},this.nearest=function(t,n,l){var o,h,a;if(a=new e((function(t){return-t[1]})),l)for(o=0;o<n;o+=1)a.push([null,l]);for(r.root&&function e(r){function l(t,e){a.push([t,e]),a.size()>n&&a.pop()}var o,h,u,c,f=s[r.dimension],g=i(t,r.obj),d={};for(c=0;c<s.length;c+=1)c===r.dimension?d[s[c]]=t[s[c]]:d[s[c]]=r.obj[s[c]];h=i(d,r.obj),null!==r.right||null!==r.left?(e(o=null===r.right?r.left:null===r.left?r.right:t[f]<r.obj[f]?r.left:r.right),(a.size()<n||g<a.peek()[1])&&l(r,g),(a.size()<n||Math.abs(h)<a.peek()[1])&&null!==(u=o===r.left?r.right:r.left)&&e(u)):(a.size()<n||g<a.peek()[1])&&l(r,g)}(r.root),h=[],o=0;o<Math.min(n,a.content.length);o+=1)a.content[o][0]&&h.push([a.content[o][0].obj,a.content[o][1]]);return h},this.balanceFactor=function(){return function t(n){return null===n?0:Math.max(t(n.left),t(n.right))+1}(r.root)/(Math.log(function t(n){return null===n?0:t(n.left)+t(n.right)+1}(r.root))/Math.log(2))}},t.BinaryHeap=e})?e.apply(n,[n]):e)||(t.exports=i)}},n={};function e(i){var s=n[i];if(void 0!==s)return s.exports;var r=n[i]={exports:{}};return t[i].call(r.exports,r,r.exports,e),r.exports}e.d=(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return(()=>{"use strict";e.r(i),e.d(i,{circleShape:()=>E,distanceGraph:()=>J,gridDistribution:()=>K,phyllotaxisSpiralDistribution:()=>N,polygonShape:()=>D,primsSpanningTree:()=>B,rectShape:()=>U,tessellation33434Distribution:()=>L,triShape:()=>O,turtleSpanningTree:()=>C,weightedVoronoiDistributionAndGraph:()=>q});const t=11102230246251565e-32,n=134217729,s=(3+8*t)*t;function r(t,n,e,i,s){let r,l,o,h,a=n[0],u=i[0],c=0,f=0;u>a==u>-a?(r=a,a=n[++c]):(r=u,u=i[++f]);let g=0;if(c<t&&f<e)for(u>a==u>-a?(l=a+r,o=r-(l-a),a=n[++c]):(l=u+r,o=r-(l-u),u=i[++f]),r=l,0!==o&&(s[g++]=o);c<t&&f<e;)u>a==u>-a?(l=r+a,h=l-r,o=r-(l-h)+(a-h),a=n[++c]):(l=r+u,h=l-r,o=r-(l-h)+(u-h),u=i[++f]),r=l,0!==o&&(s[g++]=o);for(;c<t;)l=r+a,h=l-r,o=r-(l-h)+(a-h),a=n[++c],r=l,0!==o&&(s[g++]=o);for(;f<e;)l=r+u,h=l-r,o=r-(l-h)+(u-h),u=i[++f],r=l,0!==o&&(s[g++]=o);return 0===r&&0!==g||(s[g++]=r),g}function l(t){return new Float64Array(t)}const o=l(4),h=l(8),a=l(12),u=l(16),c=l(4);function f(t,e,i,l,f,g){const d=(e-g)*(i-f),_=(t-f)*(l-g),y=d-_,p=Math.abs(d+_);return Math.abs(y)>=33306690738754716e-32*p?y:-function(t,e,i,l,f,g,d){let _,y,p,m,x,b,v,w,M,k,T,A,S,j,P,F,$,I;const z=t-f,E=i-f,U=e-g,O=l-g;j=z*O,b=n*z,v=b-(b-z),w=z-v,b=n*O,M=b-(b-O),k=O-M,P=w*k-(j-v*M-w*M-v*k),F=U*E,b=n*U,v=b-(b-U),w=U-v,b=n*E,M=b-(b-E),k=E-M,$=w*k-(F-v*M-w*M-v*k),T=P-$,x=P-T,o[0]=P-(T+x)+(x-$),A=j+T,x=A-j,S=j-(A-x)+(T-x),T=S-F,x=S-T,o[1]=S-(T+x)+(x-F),I=A+T,x=I-A,o[2]=A-(I-x)+(T-x),o[3]=I;let D=function(t,n){let e=n[0];for(let t=1;t<4;t++)e+=n[t];return e}(0,o),K=22204460492503146e-32*d;if(D>=K||-D>=K)return D;if(x=t-z,_=t-(z+x)+(x-f),x=i-E,p=i-(E+x)+(x-f),x=e-U,y=e-(U+x)+(x-g),x=l-O,m=l-(O+x)+(x-g),0===_&&0===y&&0===p&&0===m)return D;if(K=11093356479670487e-47*d+s*Math.abs(D),D+=z*m+O*_-(U*p+E*y),D>=K||-D>=K)return D;j=_*O,b=n*_,v=b-(b-_),w=_-v,b=n*O,M=b-(b-O),k=O-M,P=w*k-(j-v*M-w*M-v*k),F=y*E,b=n*y,v=b-(b-y),w=y-v,b=n*E,M=b-(b-E),k=E-M,$=w*k-(F-v*M-w*M-v*k),T=P-$,x=P-T,c[0]=P-(T+x)+(x-$),A=j+T,x=A-j,S=j-(A-x)+(T-x),T=S-F,x=S-T,c[1]=S-(T+x)+(x-F),I=A+T,x=I-A,c[2]=A-(I-x)+(T-x),c[3]=I;const L=r(4,o,4,c,h);j=z*m,b=n*z,v=b-(b-z),w=z-v,b=n*m,M=b-(b-m),k=m-M,P=w*k-(j-v*M-w*M-v*k),F=U*p,b=n*U,v=b-(b-U),w=U-v,b=n*p,M=b-(b-p),k=p-M,$=w*k-(F-v*M-w*M-v*k),T=P-$,x=P-T,c[0]=P-(T+x)+(x-$),A=j+T,x=A-j,S=j-(A-x)+(T-x),T=S-F,x=S-T,c[1]=S-(T+x)+(x-F),I=A+T,x=I-A,c[2]=A-(I-x)+(T-x),c[3]=I;const H=r(L,h,4,c,a);j=_*m,b=n*_,v=b-(b-_),w=_-v,b=n*m,M=b-(b-m),k=m-M,P=w*k-(j-v*M-w*M-v*k),F=y*p,b=n*y,v=b-(b-y),w=y-v,b=n*p,M=b-(b-p),k=p-M,$=w*k-(F-v*M-w*M-v*k),T=P-$,x=P-T,c[0]=P-(T+x)+(x-$),A=j+T,x=A-j,S=j-(A-x)+(T-x),T=S-F,x=S-T,c[1]=S-(T+x)+(x-F),I=A+T,x=I-A,c[2]=A-(I-x)+(T-x),c[3]=I;const N=r(H,a,4,c,u);return u[N-1]}(t,e,i,l,f,g,p)}l(4),l(4),l(4),l(4),l(4),l(4),l(4),l(4),l(4),l(8),l(8),l(8),l(4),l(8),l(8),l(8),l(12),l(192),l(192),l(4),l(4),l(4),l(4),l(4),l(4),l(4),l(4),l(8),l(8),l(8),l(8),l(8),l(8),l(8),l(8),l(8),l(4),l(4),l(4),l(8),l(16),l(16),l(16),l(32),l(32),l(48),l(64),l(1152),l(1152),l(4),l(4),l(4),l(4),l(4),l(4),l(4),l(4),l(4),l(4),l(24),l(24),l(24),l(24),l(24),l(24),l(24),l(24),l(24),l(24),l(1152),l(1152),l(1152),l(1152),l(1152),l(2304),l(2304),l(3456),l(5760),l(8),l(8),l(8),l(16),l(24),l(48),l(48),l(96),l(192),l(384),l(384),l(384),l(768),l(96),l(96),l(96),l(1152);const g=Math.pow(2,-52),d=new Uint32Array(512);class _{static from(t,n=v,e=w){const i=t.length,s=new Float64Array(2*i);for(let r=0;r<i;r++){const i=t[r];s[2*r]=n(i),s[2*r+1]=e(i)}return new _(s)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const e=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*e),this._halfedges=new Int32Array(3*e),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:e,_hullTri:i,_hullHash:s}=this,r=t.length>>1;let l=1/0,o=1/0,h=-1/0,a=-1/0;for(let n=0;n<r;n++){const e=t[2*n],i=t[2*n+1];e<l&&(l=e),i<o&&(o=i),e>h&&(h=e),i>a&&(a=i),this._ids[n]=n}const u=(l+h)/2,c=(o+a)/2;let d,_,p;for(let n=0,e=1/0;n<r;n++){const i=y(u,c,t[2*n],t[2*n+1]);i<e&&(d=n,e=i)}const b=t[2*d],v=t[2*d+1];for(let n=0,e=1/0;n<r;n++){if(n===d)continue;const i=y(b,v,t[2*n],t[2*n+1]);i<e&&i>0&&(_=n,e=i)}let w=t[2*_],M=t[2*_+1],k=1/0;for(let n=0;n<r;n++){if(n===d||n===_)continue;const e=m(b,v,w,M,t[2*n],t[2*n+1]);e<k&&(p=n,k=e)}let T=t[2*p],A=t[2*p+1];if(k===1/0){for(let n=0;n<r;n++)this._dists[n]=t[2*n]-t[0]||t[2*n+1]-t[1];x(this._ids,this._dists,0,r-1);const n=new Uint32Array(r);let e=0;for(let t=0,i=-1/0;t<r;t++){const s=this._ids[t],r=this._dists[s];r>i&&(n[e++]=s,i=r)}return this.hull=n.subarray(0,e),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(f(b,v,w,M,T,A)<0){const t=_,n=w,e=M;_=p,w=T,M=A,p=t,T=n,A=e}const S=function(t,n,e,i,s,r){const l=e-t,o=i-n,h=s-t,a=r-n,u=l*l+o*o,c=h*h+a*a,f=.5/(l*a-o*h);return{x:t+(a*u-o*c)*f,y:n+(l*c-h*u)*f}}(b,v,w,M,T,A);this._cx=S.x,this._cy=S.y;for(let n=0;n<r;n++)this._dists[n]=y(t[2*n],t[2*n+1],S.x,S.y);x(this._ids,this._dists,0,r-1),this._hullStart=d;let j=3;e[d]=n[p]=_,e[_]=n[d]=p,e[p]=n[_]=d,i[d]=0,i[_]=1,i[p]=2,s.fill(-1),s[this._hashKey(b,v)]=d,s[this._hashKey(w,M)]=_,s[this._hashKey(T,A)]=p,this.trianglesLen=0,this._addTriangle(d,_,p,-1,-1,-1);for(let r,l,o=0;o<this._ids.length;o++){const h=this._ids[o],a=t[2*h],u=t[2*h+1];if(o>0&&Math.abs(a-r)<=g&&Math.abs(u-l)<=g)continue;if(r=a,l=u,h===d||h===_||h===p)continue;let c=0;for(let t=0,n=this._hashKey(a,u);t<this._hashSize&&(c=s[(n+t)%this._hashSize],-1===c||c===e[c]);t++);c=n[c];let y,m=c;for(;y=e[m],f(a,u,t[2*m],t[2*m+1],t[2*y],t[2*y+1])>=0;)if(m=y,m===c){m=-1;break}if(-1===m)continue;let x=this._addTriangle(m,h,e[m],-1,-1,i[m]);i[h]=this._legalize(x+2),i[m]=x,j++;let b=e[m];for(;y=e[b],f(a,u,t[2*b],t[2*b+1],t[2*y],t[2*y+1])<0;)x=this._addTriangle(b,h,y,i[h],-1,i[b]),i[h]=this._legalize(x+2),e[b]=b,j--,b=y;if(m===c)for(;y=n[m],f(a,u,t[2*y],t[2*y+1],t[2*m],t[2*m+1])<0;)x=this._addTriangle(y,h,m,-1,i[m],i[y]),this._legalize(x+2),i[y]=x,e[m]=m,j--,m=y;this._hullStart=n[h]=m,e[m]=n[b]=h,e[h]=b,s[this._hashKey(a,u)]=h,s[this._hashKey(t[2*m],t[2*m+1])]=m}this.hull=new Uint32Array(j);for(let t=0,n=this._hullStart;t<j;t++)this.hull[t]=n,n=e[n];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:e,coords:i}=this;let s=0,r=0;for(;;){const l=e[t],o=t-t%3;if(r=o+(t+2)%3,-1===l){if(0===s)break;t=d[--s];continue}const h=l-l%3,a=o+(t+1)%3,u=h+(l+2)%3,c=n[r],f=n[t],g=n[a],_=n[u];if(p(i[2*c],i[2*c+1],i[2*f],i[2*f+1],i[2*g],i[2*g+1],i[2*_],i[2*_+1])){n[t]=_,n[l]=c;const i=e[u];if(-1===i){let n=this._hullStart;do{if(this._hullTri[n]===u){this._hullTri[n]=t;break}n=this._hullPrev[n]}while(n!==this._hullStart)}this._link(t,i),this._link(l,e[r]),this._link(r,u);const o=h+(l+1)%3;s<d.length&&(d[s++]=o)}else{if(0===s)break;t=d[--s]}}return r}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,e,i,s,r){const l=this.trianglesLen;return this._triangles[l]=t,this._triangles[l+1]=n,this._triangles[l+2]=e,this._link(l,i),this._link(l+1,s),this._link(l+2,r),this.trianglesLen+=3,l}}function y(t,n,e,i){const s=t-e,r=n-i;return s*s+r*r}function p(t,n,e,i,s,r,l,o){const h=t-l,a=n-o,u=e-l,c=i-o,f=s-l,g=r-o,d=u*u+c*c,_=f*f+g*g;return h*(c*_-d*g)-a*(u*_-d*f)+(h*h+a*a)*(u*g-c*f)<0}function m(t,n,e,i,s,r){const l=e-t,o=i-n,h=s-t,a=r-n,u=l*l+o*o,c=h*h+a*a,f=.5/(l*a-o*h),g=(a*u-o*c)*f,d=(l*c-h*u)*f;return g*g+d*d}function x(t,n,e,i){if(i-e<=20)for(let s=e+1;s<=i;s++){const i=t[s],r=n[i];let l=s-1;for(;l>=e&&n[t[l]]>r;)t[l+1]=t[l--];t[l+1]=i}else{let s=e+1,r=i;b(t,e+i>>1,s),n[t[e]]>n[t[i]]&&b(t,e,i),n[t[s]]>n[t[i]]&&b(t,s,i),n[t[e]]>n[t[s]]&&b(t,e,s);const l=t[s],o=n[l];for(;;){do{s++}while(n[t[s]]<o);do{r--}while(n[t[r]]>o);if(r<s)break;b(t,s,r)}t[e+1]=t[r],t[r]=l,i-s+1>=r-e?(x(t,n,s,i),x(t,n,e,r-1)):(x(t,n,e,r-1),x(t,n,s,i))}}function b(t,n,e){const i=t[n];t[n]=t[e],t[e]=i}function v(t){return t[0]}function w(t){return t[1]}const M=1e-6;class k{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,e){const i=(t=+t)+(e=+e),s=n=+n;if(e<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>M||Math.abs(this._y1-s)>M)&&(this._+="L"+i+","+s),e&&(this._+=`A${e},${e},0,1,1,${t-e},${n}A${e},${e},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,e,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+e}v${+i}h${-e}Z`}value(){return this._||null}}class T{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class A{constructor(t,[n,e,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n)&&(s=+s)>=(e=+e)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=e,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:e},vectors:i}=this;let s,r;const l=this.circumcenters=this._circumcenters.subarray(0,e.length/3*2);for(let i,o,h=0,a=0,u=e.length;h<u;h+=3,a+=2){const u=2*e[h],c=2*e[h+1],f=2*e[h+2],g=t[u],d=t[u+1],_=t[c],y=t[c+1],p=t[f],m=t[f+1],x=_-g,b=y-d,v=p-g,w=m-d,M=2*(x*w-b*v);if(Math.abs(M)<1e-9){if(void 0===s){s=r=0;for(const e of n)s+=t[2*e],r+=t[2*e+1];s/=n.length,r/=n.length}const e=1e9*Math.sign((s-g)*w-(r-d)*v);i=(g+p)/2-e*w,o=(d+m)/2+e*v}else{const t=1/M,n=x*x+b*b,e=v*v+w*w;i=g+(w*n-b*e)*t,o=d+(x*e-v*n)*t}l[a]=i,l[a+1]=o}let o,h,a,u=n[n.length-1],c=4*u,f=t[2*u],g=t[2*u+1];i.fill(0);for(let e=0;e<n.length;++e)u=n[e],o=c,h=f,a=g,c=4*u,f=t[2*u],g=t[2*u+1],i[o+2]=i[c]=a-g,i[o+3]=i[c+1]=f-h}render(t){const n=null==t?t=new k:void 0,{delaunay:{halfedges:e,inedges:i,hull:s},circumcenters:r,vectors:l}=this;if(s.length<=1)return null;for(let n=0,i=e.length;n<i;++n){const i=e[n];if(i<n)continue;const s=2*Math.floor(n/3),l=2*Math.floor(i/3),o=r[s],h=r[s+1],a=r[l],u=r[l+1];this._renderSegment(o,h,a,u,t)}let o,h=s[s.length-1];for(let n=0;n<s.length;++n){o=h,h=s[n];const e=2*Math.floor(i[h]/3),a=r[e],u=r[e+1],c=4*o,f=this._project(a,u,l[c+2],l[c+3]);f&&this._renderSegment(a,u,f[0],f[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new k:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const e=null==n?n=new k:void 0,i=this._clip(t);if(null===i||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let t=2;t<s;t+=2)i[t]===i[t-2]&&i[t+1]===i[t-1]||n.lineTo(i[t],i[t+1]);return n.closePath(),e&&e.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,e=t.length/2;n<e;++n){const t=this.cellPolygon(n);t&&(t.index=n,yield t)}}cellPolygon(t){const n=new T;return this.renderCell(t,n),n.value()}_renderSegment(t,n,e,i,s){let r;const l=this._regioncode(t,n),o=this._regioncode(e,i);0===l&&0===o?(s.moveTo(t,n),s.lineTo(e,i)):(r=this._clipSegment(t,n,e,i,l,o))&&(s.moveTo(r[0],r[1]),s.lineTo(r[2],r[3]))}contains(t,n,e){return(n=+n)==n&&(e=+e)==e&&this.delaunay._step(t,n,e)===t}*neighbors(t){const n=this._clip(t);if(n)for(const e of this.delaunay.neighbors(t)){const t=this._clip(e);if(t)t:for(let i=0,s=n.length;i<s;i+=2)for(let r=0,l=t.length;r<l;r+=2)if(n[i]===t[r]&&n[i+1]===t[r+1]&&n[(i+2)%s]===t[(r+l-2)%l]&&n[(i+3)%s]===t[(r+l-1)%l]){yield e;break t}}}_cell(t){const{circumcenters:n,delaunay:{inedges:e,halfedges:i,triangles:s}}=this,r=e[t];if(-1===r)return null;const l=[];let o=r;do{const e=Math.floor(o/3);if(l.push(n[2*e],n[2*e+1]),o=o%3==2?o-2:o+1,s[o]!==t)break;o=i[o]}while(o!==r&&-1!==o);return l}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:e}=this,i=4*t;return this._simplify(e[i]||e[i+1]?this._clipInfinite(t,n,e[i],e[i+1],e[i+2],e[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const e=n.length;let i,s,r,l,o=null,h=n[e-2],a=n[e-1],u=this._regioncode(h,a),c=0;for(let f=0;f<e;f+=2)if(i=h,s=a,h=n[f],a=n[f+1],r=u,u=this._regioncode(h,a),0===r&&0===u)l=c,c=0,o?o.push(h,a):o=[h,a];else{let n,e,f,g,d;if(0===r){if(null===(n=this._clipSegment(i,s,h,a,r,u)))continue;[e,f,g,d]=n}else{if(null===(n=this._clipSegment(h,a,i,s,u,r)))continue;[g,d,e,f]=n,l=c,c=this._edgecode(e,f),l&&c&&this._edge(t,l,c,o,o.length),o?o.push(e,f):o=[e,f]}l=c,c=this._edgecode(g,d),l&&c&&this._edge(t,l,c,o,o.length),o?o.push(g,d):o=[g,d]}if(o)l=c,c=this._edgecode(o[0],o[1]),l&&c&&this._edge(t,l,c,o,o.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return o}_clipSegment(t,n,e,i,s,r){const l=s<r;for(l&&([t,n,e,i,s,r]=[e,i,t,n,r,s]);;){if(0===s&&0===r)return l?[e,i,t,n]:[t,n,e,i];if(s&r)return null;let o,h,a=s||r;8&a?(o=t+(e-t)*(this.ymax-n)/(i-n),h=this.ymax):4&a?(o=t+(e-t)*(this.ymin-n)/(i-n),h=this.ymin):2&a?(h=n+(i-n)*(this.xmax-t)/(e-t),o=this.xmax):(h=n+(i-n)*(this.xmin-t)/(e-t),o=this.xmin),s?(t=o,n=h,s=this._regioncode(t,n)):(e=o,i=h,r=this._regioncode(e,i))}}_clipInfinite(t,n,e,i,s,r){let l,o=Array.from(n);if((l=this._project(o[0],o[1],e,i))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],s,r))&&o.push(l[0],l[1]),o=this._clipFinite(t,o))for(let n,e=0,i=o.length,s=this._edgecode(o[i-2],o[i-1]);e<i;e+=2)n=s,s=this._edgecode(o[e],o[e+1]),n&&s&&(e=this._edge(t,n,s,o,e),i=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,e,i,s){for(;n!==e;){let e,r;switch(n){case 5:n=4;continue;case 4:n=6,e=this.xmax,r=this.ymin;break;case 6:n=2;continue;case 2:n=10,e=this.xmax,r=this.ymax;break;case 10:n=8;continue;case 8:n=9,e=this.xmin,r=this.ymax;break;case 9:n=1;continue;case 1:n=5,e=this.xmin,r=this.ymin}i[s]===e&&i[s+1]===r||!this.contains(t,e,r)||(i.splice(s,0,e,r),s+=2)}return s}_project(t,n,e,i){let s,r,l,o=1/0;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,r=t+(o=s)*e)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,r=t+(o=s)*e)}if(e>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/e)<o&&(r=this.xmax,l=n+(o=s)*i)}else if(e<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/e)<o&&(r=this.xmin,l=n+(o=s)*i)}return[r,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const e=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[e]&&t[e]===t[i]||t[n+1]===t[e+1]&&t[e+1]===t[i+1])&&(t.splice(e,2),n-=2)}t.length||(t=null)}return t}}const S=2*Math.PI,j=Math.pow;function P(t){return t[0]}function F(t){return t[1]}function $(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}class I{static from(t,n=P,e=F,i){return new I("length"in t?function(t,n,e,i){const s=t.length,r=new Float64Array(2*s);for(let l=0;l<s;++l){const s=t[l];r[2*l]=n.call(i,s,l,t),r[2*l+1]=e.call(i,s,l,t)}return r}(t,n,e,i):Float64Array.from(function*(t,n,e,i){let s=0;for(const r of t)yield n.call(i,r,s,t),yield e.call(i,r,s,t),++s}(t,n,e,i)))}constructor(t){this._delaunator=new _(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:n,coords:e}=t;for(let t=0;t<n.length;t+=3){const i=2*n[t],s=2*n[t+1],r=2*n[t+2];if((e[r]-e[i])*(e[s+1]-e[i+1])-(e[s]-e[i])*(e[r+1]-e[i+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},((t,n)=>n)).sort(((t,e)=>n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]));const t=this.collinear[0],e=this.collinear[this.collinear.length-1],i=[n[2*t],n[2*t+1],n[2*e],n[2*e+1]],s=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]);for(let t=0,e=n.length/2;t<e;++t){const e=$(n[2*t],n[2*t+1],s);n[2*t]=e[0],n[2*t+1]=e[1]}this._delaunator=new _(n)}else delete this.collinear;const e=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,r=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let t=0,n=e.length;t<n;++t){const n=s[t%3==2?t-2:t+1];-1!==e[t]&&-1!==r[n]||(r[n]=t)}for(let t=0,n=i.length;t<n;++t)l[i[t]]=t;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],r[i[0]]=1,2===i.length&&(r[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new A(this,t)}*neighbors(t){const{inedges:n,hull:e,_hullIndex:i,halfedges:s,triangles:r,collinear:l}=this;if(l){const n=l.indexOf(t);return n>0&&(yield l[n-1]),void(n<l.length-1&&(yield l[n+1]))}const o=n[t];if(-1===o)return;let h=o,a=-1;do{if(yield a=r[h],h=h%3==2?h-2:h+1,r[h]!==t)return;if(h=s[h],-1===h){const n=e[(i[t]+1)%e.length];return void(n!==a&&(yield n))}}while(h!==o)}find(t,n,e=0){if((t=+t)!=t||(n=+n)!=n)return-1;const i=e;let s;for(;(s=this._step(e,t,n))>=0&&s!==e&&s!==i;)e=s;return s}_step(t,n,e){const{inedges:i,hull:s,_hullIndex:r,halfedges:l,triangles:o,points:h}=this;if(-1===i[t]||!h.length)return(t+1)%(h.length>>1);let a=t,u=j(n-h[2*t],2)+j(e-h[2*t+1],2);const c=i[t];let f=c;do{let i=o[f];const c=j(n-h[2*i],2)+j(e-h[2*i+1],2);if(c<u&&(u=c,a=i),f=f%3==2?f-2:f+1,o[f]!==t)break;if(f=l[f],-1===f){if(f=s[(r[t]+1)%s.length],f!==i&&j(n-h[2*f],2)+j(e-h[2*f+1],2)<u)return f;break}}while(f!==c);return a}render(t){const n=null==t?t=new k:void 0,{points:e,halfedges:i,triangles:s}=this;for(let n=0,r=i.length;n<r;++n){const r=i[n];if(r<n)continue;const l=2*s[n],o=2*s[r];t.moveTo(e[l],e[l+1]),t.lineTo(e[o],e[o+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){void 0!==n||t&&"function"==typeof t.moveTo||(n=t,t=null),n=null==n?2:+n;const e=null==t?t=new k:void 0,{points:i}=this;for(let e=0,s=i.length;e<s;e+=2){const s=i[e],r=i[e+1];t.moveTo(s+n,r),t.arc(s,r,n,0,S)}return e&&e.value()}renderHull(t){const n=null==t?t=new k:void 0,{hull:e,points:i}=this,s=2*e[0],r=e.length;t.moveTo(i[s],i[s+1]);for(let n=1;n<r;++n){const s=2*e[n];t.lineTo(i[s],i[s+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new T;return this.renderHull(t),t.value()}renderTriangle(t,n){const e=null==n?n=new k:void 0,{points:i,triangles:s}=this,r=2*s[t*=3],l=2*s[t+1],o=2*s[t+2];return n.moveTo(i[r],i[r+1]),n.lineTo(i[l],i[l+1]),n.lineTo(i[o],i[o+1]),n.closePath(),e&&e.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,e=t.length/3;n<e;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new T;return this.renderTriangle(t,n),n.value()}}const z=e(317).kdTree;function E(t,n,e){return i=>{const s=i[0]-t,r=i[1]-n;return s*s+r*r<e*e}}function U(t,n,e,i){return s=>{const r=s[0]-t,l=s[1]-n;return Math.abs(r)<e/2&&Math.abs(l)<i/2}}function O(t,n,e,i,s,r){return l=>{const o=(t,n,e,i,s,r)=>(t-s)*(i-r)-(e-s)*(n-r);let h,a,u,c,f;return h=o(l[0],l[1],t,n,e,i),a=o(l[0],l[1],e,i,s,r),u=o(l[0],l[1],t,n,s,r),c=h<0||a<0||u<0,f=h>0||a>0||u>0,!(has_neg&&has_pos)}}function D(t){return n=>{const e=t.slice();e[0]===e[e.length-2]&&e[1]===e[e.length-1]||e.push(e[0],e[1]);let i=n[0],s=n[1],r=0;for(let t=0;t<e.length-2;t+=2){let n=e[t],l=e[t+1],o=e[t+2],h=e[t+3];if(s<l!=s<h&&i<n!=i<o&&(o-n)*(s-l)==(i-n)*(h-l))return!0;s<l!=s<h&&i<(o-n)*(s-l)/(h-l)+n&&r++}return r%2==1}}function K(t,n,e,i,s){const r=s||1/0,l=i||1/0;if(r===1/0&&l===1/0)throw new Error("one of the end condition must be provided");let o=[];const h="number"==typeof e?e:e[0],a="number"==typeof e?e:e[1],u=t[0],c=t[1];let f=0,g=0;for(;o.length/2<r;){let t=H(f),e=[u+t[0]*h,c+t[1]*a];if(n(e)?(o.push(...e),g=0):g++,f++,Math.min(h*Math.abs(t[0]),a*Math.abs(t[1]))>l)break;if(g>999)break}return o}function L(t,n,e,i,s){const r=e/2,l=t[0],o=t[1],h=s||1/0,a=i||1/0;if(h===1/0&&a===1/0)throw new Error("one of the end condition must be provided");let u=[],c=0,f=0;for(;u.length/2<h;){let t=H(c);const i=l+t[0]*r*6,s=o+t[1]*r*6;let h=[[i,s+r],[i+2*r,s+r],[i+r,s-r],[i+r,s-3*r],[i-r,s-2*r],[i-3*r,s-2*r],[i-2*r,s],[i-2*r,s+2*r]];for(const t of h)n(t)?(u.push(...t),f=0):f++;c++;let g=e*Math.min(Math.abs(t[0]),Math.abs(t[1]));if(g-=3*r,g>a)break;if(f>999)break}return u}const H=t=>{const n=[[-1,0],[0,1],[1,0],[0,-1]];if(0===t)return[0,0];const e=(t=>{const n=Math.floor(Math.sqrt(t));return Math.ceil(n/2)})(t),i=t-(t=>4*t*(t-1)+1)(e),s=(t=>2*t)(e),r=Math.floor(i/s),l=1+i%s;let o=[[1,-1],[-1,-1],[-1,1],[1,1]][r].slice();return o[0]*=e,o[1]*=e,o[0]+=l*n[r][0],o[1]+=l*n[r][1],o};function N(t,n,e,i,s){const r=Math.PI*(1+Math.sqrt(5)),l=t[0],o=t[1],h=s||1/0;if(h===1/0&&(i||1/0)===1/0)throw new Error("one of the end condition must be provided");let a=[],u=0,c=0;for(;a.length<h;){let t=r*u,s=e*Math.sqrt(u),h=l+s*Math.cos(t),f=o+s*Math.sin(t);if(n([h,f])?(a.push(h,f),c=0):c++,u++,s>i)break;if(c>999)break}return a}function q(t,n,e,i,s,r){const l=t[0],o=t[1],h=function(t){t.xmax,t.xmin;let n=t.delaunay.points,e=new Array(n.length/2).fill(0),i=new Array(n.length).fill(0),s=new Array(n.length/2).fill(0),l=0;for(let n=t.xmin;n<t.xmax;n++)for(let o=t.ymin;o<t.ymax;o++){let h=r([n,o]);l=t.delaunay.find(n,o,l),i[2*l]+=n*h,i[2*l+1]+=o*h,e[l]+=h,s[l]++}for(let t=0;t<i.length;t+=2)e[t/2]>0?(i[t]/=e[t/2],i[t+1]/=e[t/2]):(i[t]=n[t],i[t+1]=n[t+1]);for(let t=0;t<n.length;t++)n[t]+=i[t]-n[t];return new d3.Delaunay(n).voronoi([t.xmin,t.ymin,t.xmax,t.ymax])};let a=[];for(let t=0;t<e;t++){let t=l-i[0]/2+Math.random()*i[0],n=o-i[1]/2+Math.random()*i[1];a.push(t,n)}let u=new I(a).voronoi([l-i[0]/2,o-i[1]/2,l+i[0]/2,o+i[1]/2]);for(let t=0;t<s;t++)u=h(u);let c=[],f=[],g={},d=0,_=new Set;for(let t=0;t<u.delaunay.points.length;t+=2){const e=[u.delaunay.points[t],u.delaunay.points[t+1]],i=t/2;n(e)&&(c.push(i),f.push(...e),g[i]=d,d++)}for(let t=0;t<c.length;++t){let n=u.neighbors(c[t]);for(const e of n)if(c.includes(e)){let n=g[e],i=n>t?t+" "+n:n+" "+t;_.add(i)}}return[f,_]}function J(t,n,e){if((n===1/0||n<0)&&(n=t.length/2),!Array.isArray(t))throw new Error("points need to be an array");let i=new z([],((t,n)=>(t[0]-n[0])**2+(t[1]-n[1])**2),[0,1]);for(let n=0;n<t.length;n+=2)i.insert([t[n],t[n+1],n/2]);let s=new Set;for(let r=0;r<t.length/2;++r){const l=[t[2*r],t[2*r+1]];let o=i.nearest(l,n+1,e**2);o=o.filter((t=>t[1]>0));for(let t=0;t<o.length;++t){let n=o[t][0][2];const e=n>r?r+" "+n:n+" "+r;s.add(e)}}return s}function B(t){let n=[t[0],t[1]],e={x:n[0],y:n[1],children:[]},i=new z([],((t,n)=>(t.x-n.x)**2+(t.y-n.y)**2),["x","y"]);for(let n=2;n<t.length;n+=2)i.insert({x:t[n],y:t[n+1],children:[]});let s=[e],r=t.length/2-1;for(;r>0;){let t,n,e=1/0;for(let r=0;r<s.length;++r){let l=i.nearest(s[r],1)[0];l[1]<e&&(e=l[1],t=s[r],n=l[0])}t.children.push(n),i.remove(n),s.push(n),r--}return e}function C(t,n,e=0){let i=[];for(let n=0;n<t.length;n+=2)i.push({x:t[n],y:t[n+1],children:[],id:n/2});let s=i[0];const r=t=>{let e=[];for(const i of n){let n=i.split(" ").map((t=>parseInt(t)));n[0]!==t&&n[1]!==t||e.push(n[0]===t?n[1]:n[0])}return e=e.filter((t=>!o.includes(t))),e.map((t=>i[t]))};let l=s,o=[0],h=[s];switch(e){default:break;case 0:for(;h.length>0;){let t=r(l.id);if(t.length>0){let n=t[Math.floor(Math.random()*t.length)];l.children.push(n),o.push(n.id),h.unshift(n),l=n}else l=h.pop()}break;case 1:for(;h.length>0;)r(l.id).forEach((t=>{o.push(t.id),l.children.push(t),h.push(t)})),l=h.shift();break;case 2:for(;h.length>0;)r(l.id).forEach((t=>{o.push(t.id),l.children.push(t),Math.random()>.5?h.push(t):h.unshift(t)})),l=h.shift();break;case 3:let t=!1,n=0;for(;h.length>0;){n++,n>3&&(t=!t,n=0);let e=r(l.id);if(G(l,e),e.length>0){let n=e[t?0:e.length-1];l.children.push(n),o.push(n.id),h.unshift(n),l=n}else l=h.pop()}}return s}function G(t,n){let e;n.forEach((n=>{let i=Math.atan2(n.y-t.y,n.x-t.x);e?i<e&&(i+=2*Math.PI):e=i,n.angle=i})),n.sort(((t,n)=>n.angle-t.angle)),n.forEach((t=>delete t.angle))}})(),i})()));